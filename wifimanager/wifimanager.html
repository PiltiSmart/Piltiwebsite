<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="topnav">
    <image><img src="images/logo-new1.jpg" alt="images" width="200" height="40"></image>
  </div>
 
  <div class="content">
    <div class="card-grid">
      <div class="card">
          <h1>PILTISMART WIFI MANAGER</h1>
          <p>
            <table align="center">
             
          <tr>
           <td align="right"><label for="ssid">Wifi Name(SSID)</label></td>
           <td align="left"><input type="text" id ="ssid" name="ssid"></td><br>
          </tr>
          <tr>
            <td align="right"><label for="pass">Password</label></td>
            <td align="left"><input type="text" id ="pass" name="pass"></td><br>
          </tr>
          <tr>
            <td align="right"><label for="ip">IP Address</label></td>
              <td align="left"><input type="text" id ="ip" name="ip" value="192.168.4.1"><br></td>
          </tr>
          <tr>
            <td align="right"><label for="port">Port</label></td>
              <td align="left"><input type="text" id ="port" name="port" value="233"><br></td>
          </tr>
          <!-- 
          <tr>
            <td align="right"><label for="gateway">Gateway Address</label></td>
              <td align="left"><input type="text" id ="gateway" name="gateway" value="192.168.1.1"><br></td>
          </tr>-->
            </table>
              <input type="submit" value="Submit" onclick="submit()">
            


              <script type="text/javascript">
                  function submit() {
                    let ssid = document.getElementById("ssid").value
                    if(ssid == ""){
                    alert("SSID is Required");
                  }
                    let pass = document.getElementById("pass").value
                    if(pass == ""){
                    alert("PASSWORD is Required");
                    }
                    let ip = document.getElementById("ip").value
                    if(ip == ""){
                    alert("IP Address is Required");
                    }
                    let port = document.getElementById("port").value
                    if(port == ""){
                    alert("PORT is Required");
                    }
                    let url = "http://" + ip + ":" + port + "/updateWifiDetails" + "?SSID=" + ssid +"&PSSWD=" + pass
                    //let url = "http://" + ip + ":" + port + "/me"
                    alert(url);
                      var xhr = new XMLHttpRequest();
                      xhr.onreadystatechange = function () {
                          if (xhr.readyState === 4) {
                              alert(xhr.responseText);
                          }
                      }
                      xhr.open('get', url, true);
                      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
                      xhr.send();
                  }
              </script>
          </p>
      </div>
    </div>
  </div>
</body>
</html>